/*---------------------------------------------------------------------------------------------
* Copyright (c) Bentley Systems, Incorporated. All rights reserved.
* See LICENSE.md in the project root for license terms and full copyright notice.
*--------------------------------------------------------------------------------------------*/
"use strict";

// The script parses .api.json files, generated by the extract-api.js script (and subsequently the api-extractor.com tool), and extracts the high level API items
// into markdown files using

const { spawn } = require("./utils/simpleSpawn");
const path = require('path');
const argv = require("yargs").argv;

if (undefined === argv.inDir) {
  console.log("Missing inDir argument.");
  return;
}

if(undefined === argv.outDir) {
  console.log("Missing outDir argument");
}

const inDir = argv.inDir;

const outDir = argv.outDir;

const args = [
  "markdown",
  "--input-folder", path.resolve(`${inDir}\\temp`),
  "--output-folder", path.resolve(`${outDir}\\docs`),
];

spawn(require.resolve(".bin/api-documenter"), args).then((code) => {
  console.log("API Documenter completed successfully");
}).catch((err) => {
  console.error("Error during API Documenter", err);
});